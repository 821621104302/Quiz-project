<!DOCTYPE html>
<html>
<head>
<title>PYTHON QUIZ</title>
<style>
body {
    background: #101820;
    color: white;
    font-family: Arial;
    text-align: center;
}
.container {
    width: 90%;
    max-width: 450px;
    margin: auto;
    margin-top: 40px;
    padding: 20px;
    border-radius: 12px;
    background: #1d2835;
    box-shadow: 0px 0px 10px #000;
}
input, button {
    width: 90%;
    padding: 10px;
    margin-top: 12px;
    border-radius: 8px;
    border: none;
    font-size: 16px;
}
button {
    background: #00aaff;
    color: white;
    cursor: pointer;
}
.option {
    padding: 14px;
    background: #233044;
    margin-top: 10px;
    border-radius: 8px;
    cursor: pointer;
}
.option:hover {
    background: #2e415a;
}
.correct {
    background: #0c8a1f !important;
    color: white !important;
}
.wrong {
    background: #b30000 !important;
    color: white !important;
}
#timer {
    font-size: 22px;
    margin-bottom: 15px;
}

/* table for admin */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}
th, td {
    padding: 8px;
    border-bottom: 1px solid #555;
}
th {
    background: #233044;
}
.delete-btn {
    background: red;
    padding: 5px 10px;
    border-radius: 6px;
    cursor: pointer;
    color: white;
    font-size: 13px;
}
.search-box {
    width: 90%;
    padding: 10px;
    margin-bottom: 15px;
    border-radius: 8px;
    border: none;
    font-size: 16px;
}
.sort-btn, .clear-btn {
    background: orange;
    color: black;
    width: 45%;
    padding: 10px;
    margin: 8px 4px;
}
</style>
</head>
<body>

<!-- LOGIN PAGE -->
<div class="container" id="loginBox">
    <h1>PYTHON QUIZ</h1>
    <h3>Login to start</h3>

    <input type="text" id="username" placeholder="Enter your name" required>
    <input type="email" id="email" placeholder="Enter your email" required>
    <button onclick="startQuiz()">Start Quiz</button>
</div>

<!-- QUIZ PAGE -->
<div class="container" id="quizBox" style="display:none;">
    <h2>Python Quiz</h2>
    <p id="timer">Time Left: 05:00</p>
    <div id="question-box"></div>
    <button onclick="nextQuestion()">Next</button>
</div>

<!-- RESULT PAGE -->
<div class="container" id="resultBox" style="display:none;">
    <h1>Quiz Completed!</h1>
    <h2 id="user"></h2>
    <h2 id="score"></h2>
    <button onclick="location.reload()">Restart</button>
</div>

<!-- ADMIN LOGIN -->
<div class="container" id="adminLogin" style="display:none;">
    <h1>Admin Login</h1>
    <input type="password" id="adminPass" placeholder="Enter Admin Password">
    <button onclick="checkAdmin()">Login</button>
</div>

<!-- ADMIN PANEL -->
<div class="container" id="adminPanel" style="display:none;">
    <h1>Quiz Records</h1>

    <input class="search-box" id="search" placeholder="Search by name/email" onkeyup="searchRecord()">

    <button class="sort-btn" onclick="sortScore()">Sort by Highest Score</button>
    <button class="clear-btn" onclick="clearAll()">Clear All Records</button>

    <table>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Score</th>
            <th>Date</th>
            <th>Delete</th>
        </tr>
        <tbody id="recordTable"></tbody>
    </table>
</div>
<script>
let username, email;
let index = 0;
let score = 0;
let selected = false;

const questions = [
    { q: "1. Who developed Python?", a: ["James Gosling","Guido van Rossum","Dennis Ritchie","Bjarne Stroustrup"], correct: 1 },
    { q: "2. Python file extension?", a: [".java",".py",".txt",".pyt"], correct: 1 },
    { q: "3. Function keyword?", a: ["func","define","def","function"], correct: 2 },
    { q: "4. Mutable datatype?", a: ["Tuple","List","String","Integer"], correct: 1 },
    { q: "5. Exponent operator?", a: ["^","**","//","%%"], correct: 1 },
    { q: "6. len() ?", a: ["Finds size","Adds numbers","Deletes item","None"], correct: 0 },
    { q: "7. Loop until condition false?", a: ["elif","for","while","repeat"], correct: 2 },
    { q: "8. Valid variable name?", a: ["2num","num_2","num-2","num 2"], correct: 1 },
    { q: "9. Stop loop keyword?", a: ["quit","stop","break","exit"], correct: 2 },
    { q: "10. type(10)?", a: ["str","float","class int","bool"], correct: 2 }
];

function startQuiz() {
    username = document.getElementById("username").value;
    email = document.getElementById("email").value;

    if (username === "" || email === "") {
        alert("Enter Name & Email");
        return;
    }

    document.getElementById("loginBox").style.display = "none";
    document.getElementById("quizBox").style.display = "block";

    showQuestion();
    startTimer();
}

function showQuestion() {
    selected = false;
    let q = questions[index];

    let html = `<h3>${q.q}</h3>`;

    q.a.forEach((opt, i) => {
        html += `<div class='option' onclick='selectOption(${i})' id='opt${i}'>${opt}</div>`;
    });

    document.getElementById("question-box").innerHTML = html;
}

function selectOption(i) {
    if (selected) return;

    selected = true;
    let correct = questions[index].correct;

    if (i === correct) {
        document.getElementById("opt" + i).classList.add("correct");
        score++;
    } else {
        document.getElementById("opt" + i).classList.add("wrong");
        document.getElementById("opt" + correct).classList.add("correct");
    }
}

function nextQuestion() {
    if (!selected) {
        alert("Select an answer!");
        return;
    }
    index++;

    if (index === questions.length) {
        finishQuiz();
    } else {
        showQuestion();
    }
}

function finishQuiz() {
    document.getElementById("quizBox").style.display = "none";
    document.getElementById("resultBox").style.display = "block";

    document.getElementById("user").innerHTML =
        "User: " + username + " (" + email + ")";

    document.getElementById("score").innerHTML =
        "Score: " + score + " / 10";

    saveResult();
}

let time = 300;
function startTimer() {
    let timer = setInterval(() => {
        let m = Math.floor(time / 60);
        let s = time % 60;

        document.getElementById("timer").innerHTML =
            `Time Left: ${m}:${s < 10 ? "0" + s : s}`;

        if (time <= 0) {
            clearInterval(timer);
            finishQuiz();
        }

        time--;
    }, 1000);
}

/* SAVE USER RECORD */
function saveResult() {
    let records = JSON.parse(localStorage.getItem("quizRecords") || "[]");

    records.push({
        name: username,
        email: email,
        score: score,
        date: new Date().toLocaleString()
    });

    localStorage.setItem("quizRecords", JSON.stringify(records));
}

/* ----------- ADMIN MODE ---------- */

if (location.hash === "#admin") {
    document.getElementById("loginBox").style.display = "none";
    document.getElementById("adminLogin").style.display = "block";
}

function checkAdmin() {
    let pass = document.getElementById("adminPass").value;

    if (pass === "admin123") {
        loadAdminPanel();
    } else {
        alert("Wrong Password");
    }
}

function loadAdminPanel() {
    document.getElementById("adminLogin").style.display = "none";
    document.getElementById("adminPanel").style.display = "block";
    showRecords();
}

/* SHOW RECORDS */
function showRecords() {
    let records = JSON.parse(localStorage.getItem("quizRecords") || "[]");
    let table = "";

    records.forEach((r, i) => {
        table += `
            <tr>
                <td>${r.name}</td>
                <td>${r.email}</td>
                <td>${r.score}</td>
                <td>${r.date}</td>
                <td><span class="delete-btn" onclick="deleteRecord(${i})">Delete</span></td>
            </tr>
        `;
    });

    document.getElementById("recordTable").innerHTML = table;
}

/* DELETE ONE RECORD */
function deleteRecord(i) {
    let records = JSON.parse(localStorage.getItem("quizRecords") || "[]");
    records.splice(i, 1);
    localStorage.setItem("quizRecords", JSON.stringify(records));
    showRecords();
}

/* CLEAR ALL */
function clearAll() {
    if (confirm("Delete all records?")) {
        localStorage.removeItem("quizRecords");
        showRecords();
    }
}

/* SEARCH */
function searchRecord() {
    let text = document.getElementById("search").value.toLowerCase();
    let records = JSON.parse(localStorage.getItem("quizRecords") || "[]");

    let filtered = records.filter(r =>
        r.name.toLowerCase().includes(text) ||
        r.email.toLowerCase().includes(text)
    );

    let table = "";
    filtered.forEach((r, i) => {
        table += `
            <tr>
                <td>${r.name}</td>
                <td>${r.email}</td>
                <td>${r.score}</td>
                <td>${r.date}</td>
                <td><span class="delete-btn" onclick="deleteRecord(${i})">Delete</span></td>
            </tr>
        `;
    });

    document.getElementById("recordTable").innerHTML = table;
}

/* SORT */
function sortScore() {
    let records = JSON.parse(localStorage.getItem("quizRecords") || "[]");

    records.sort((a, b) => b.score - a.score);

    localStorage.setItem("quizRecords", JSON.stringify(records));
    showRecords();
}
</script>
</body>
</html>

   
 
    
  


  
     
     
 

